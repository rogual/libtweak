#!/usr/bin/env python3

import sys

name = sys.argv[1]
value = sys.argv[2]

print(name,value)
with open('Tweakfifo', 'wt') as fifo:
    fifo.write('%s %s;' % (name, value))


d = {}
with open('Tweakfile', 'rt') as tf:
    for line in tf:
        line = line.strip()
        if line:
            c, *args = line.split(' ')
            if c == 'set':
                n, v = args
                v = v[:-1]
                d[n] = v

d[name] = value

with open('Tweakfile', 'wt') as tf:
    for n, v in d.items():
        tf.write('set %s %s\n' % (n, v))
